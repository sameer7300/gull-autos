{% extends 'base.html' %}
{% load static %}

{% block title %}Welcome to Gull Autos{% endblock %}

{% block extra_head %}
<style>
    #hero-canvas {
        position: absolute;
        top: 0;
        left: 0;
        z-index: -1;
        width: 100%;
        height: 100vh;
    }
    .hero-content {
        background: rgba(26, 26, 26, 0.7);
        padding: 2rem;
        border-radius: 1rem;
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.1);
        box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
    }
    @keyframes subtle-zoom {
        0% { transform: scale(1.05); }
        100% { transform: scale(1.1); }
    }
    .animate-subtle-zoom {
        animation: subtle-zoom 15s ease-in-out infinite alternate;
    }
    .feature-card {
        transition: transform 0.3s ease-in-out;
    }
    .feature-card:hover {
        transform: translateY(-10px);
    }
    .stats-number {
        background: linear-gradient(45deg, #3b82f6, #1d4ed8);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
    }
    .category-card {
        transition: all 0.3s ease;
        cursor: pointer;
    }
    .category-card:hover {
        transform: scale(1.05);
        box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.2), 0 10px 10px -5px rgba(0, 0, 0, 0.1);
    }
    .hero-gradient {
        background: linear-gradient(135deg, rgba(26, 26, 26, 0.95) 0%, rgba(26, 26, 26, 0.8) 100%);
    }
    .hero-image {
        clip-path: polygon(10% 0, 100% 0%, 100% 100%, 0% 100%);
    }
    .text-gradient {
        background: linear-gradient(45deg, #3b82f6, #60a5fa);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
    }
    .btn-primary {
        background: linear-gradient(45deg, #3b82f6, #2563eb);
        transition: all 0.3s ease;
    }
    .btn-primary:hover {
        transform: translateY(-2px);
        box-shadow: 0 10px 20px -5px rgba(59, 130, 246, 0.3);
    }
    .stat-card {
        background: rgba(59, 130, 246, 0.1);
        border: 1px solid rgba(59, 130, 246, 0.2);
        backdrop-filter: blur(10px);
    }
    @keyframes float {
        0% { transform: translateY(0px); }
        50% { transform: translateY(-10px); }
        100% { transform: translateY(0px); }
    }
    .floating {
        animation: float 3s ease-in-out infinite;
    }
</style>
{% endblock %}

{% block content %}
<!-- Hero Section -->
<section class="relative min-h-[700px] bg-dark-primary overflow-hidden">
    <div class="max-w-7xl mx-auto">
        <div class="grid md:grid-cols-2 gap-8 items-center min-h-[700px]">
            <!-- Left Content -->
            <div class="relative z-10 px-6 py-12 md:py-0 md:px-12 space-y-8">
                <div class="space-y-4">
                    <h2 class="text-blue-500 font-semibold text-lg tracking-wide uppercase">Welcome to Gull Autos</h2>
                    <h1 class="text-4xl md:text-6xl font-bold text-white leading-tight">
                        Elevate Your <span class="text-gradient">Driving Experience</span>
                    </h1>
                    <p class="text-lg text-gray-300 leading-relaxed">
                        Discover premium auto parts that combine innovation with reliability. 
                        From performance upgrades to essential maintenance, we've got your vehicle covered.
                    </p>
                </div>

                <!-- Action Buttons -->
                <div class="flex flex-col sm:flex-row gap-4">
                    <a href="{% url 'product_list' %}" class="btn-primary px-8 py-4 rounded-lg text-white font-semibold text-center">
                        Browse Catalog
                    </a>
                    <a href="{% url 'contact' %}" class="px-8 py-4 rounded-lg border-2 border-blue-500 text-blue-500 font-semibold hover:bg-blue-500 hover:text-white transition-all text-center">
                        Contact Us
                    </a>
                </div>

                <!-- Stats Grid -->
                <div class="grid grid-cols-2 gap-4 pt-8">
                    <div class="stat-card p-4 rounded-lg">
                        <div class="text-3xl font-bold text-blue-500 floating">15+</div>
                        <div class="text-sm text-gray-400">Years Experience</div>
                    </div>
                    <div class="stat-card p-4 rounded-lg">
                        <div class="text-3xl font-bold text-blue-500 floating">5000+</div>
                        <div class="text-sm text-gray-400">Products</div>
                    </div>
                    <div class="stat-card p-4 rounded-lg">
                        <div class="text-3xl font-bold text-blue-500 floating">24/7</div>
                        <div class="text-sm text-gray-400">Support</div>
                    </div>
                    <div class="stat-card p-4 rounded-lg">
                        <div class="text-3xl font-bold text-blue-500 floating">99%</div>
                        <div class="text-sm text-gray-400">Satisfaction</div>
                    </div>
                </div>
            </div>

            <!-- Right Image -->
            <div class="relative h-full min-h-[500px] hidden md:block">
                <div class="absolute inset-0 hero-image">
                    <img src="{% static 'challenger-5880009_1280.jpg' %}" alt="Luxury Car" class="w-full h-full object-cover">
                    <div class="absolute inset-0 bg-gradient-to-r from-dark-primary/90 to-transparent"></div>
                </div>
                <!-- Floating Features -->
                <div class="absolute top-1/4 right-8 stat-card p-4 rounded-lg floating" style="animation-delay: 0.5s">
                    <div class="flex items-center space-x-3">
                        <i class="fas fa-shield-alt text-blue-500 text-2xl"></i>
                        <div>
                            <div class="text-white font-semibold">Premium Quality</div>
                            <div class="text-sm text-gray-400">Guaranteed</div>
                        </div>
                    </div>
                </div>
                <div class="absolute bottom-1/4 right-12 stat-card p-4 rounded-lg floating" style="animation-delay: 1s">
                    <div class="flex items-center space-x-3">
                        <i class="fas fa-certificate text-blue-500 text-2xl"></i>
                        <div>
                            <div class="text-white font-semibold">Genuine Parts</div>
                            <div class="text-sm text-gray-400">100% Authentic</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Featured Products Section -->
{% if featured_products %}
<section class="py-16 bg-dark-primary">
    <div class="max-w-7xl mx-auto px-4">
        <h2 class="text-3xl font-bold mb-12 text-center text-white">Featured Products</h2>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
            {% for product in featured_products %}
            <div class="bg-dark-secondary rounded-lg overflow-hidden shadow-lg hover:shadow-xl transition-shadow">
                {% if product.image %}
                <img src="{{ product.image.url }}" alt="{{ product.name }}" class="w-full h-64 object-cover">
                {% endif %}
                <div class="p-6">
                    <h3 class="text-xl font-semibold mb-2 text-white">{{ product.name }}</h3>
                    <p class="text-gray-400 mb-4">{{ product.description|truncatewords:20 }}</p>
                    <div class="flex justify-between items-center">
                        <span class="text-2xl font-bold text-blue-500">${{ product.price }}</span>
                        <a href="{{ product.get_absolute_url }}" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition-colors">
                            View Details
                        </a>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</section>
{% endif %}

<!-- Why Choose Us Section -->
<section class="py-16 bg-dark-secondary">
    <div class="max-w-7xl mx-auto px-4">
        <h2 class="text-3xl font-bold mb-12 text-center text-white">Why Choose Us</h2>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
            <div class="text-center">
                <div class="bg-blue-600 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4">
                    <i class="fas fa-check text-2xl text-white"></i>
                </div>
                <h3 class="text-xl font-semibold text-white mb-2">Quality Products</h3>
                <p class="text-gray-400">We offer only the highest quality auto parts and accessories.</p>
            </div>
            <div class="text-center">
                <div class="bg-blue-600 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4">
                    <i class="fas fa-truck text-2xl text-white"></i>
                </div>
                <h3 class="text-xl font-semibold text-white mb-2">Fast Delivery</h3>
                <p class="text-gray-400">Quick and reliable shipping to your doorstep.</p>
            </div>
            <div class="text-center">
                <div class="bg-blue-600 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4">
                    <i class="fas fa-headset text-2xl text-white"></i>
                </div>
                <h3 class="text-xl font-semibold text-white mb-2">Expert Support</h3>
                <p class="text-gray-400">Professional assistance whenever you need it.</p>
            </div>
        </div>
    </div>
</section>

<!-- Quick Stats -->
<section class="py-12 bg-dark-secondary">
    <div class="max-w-7xl mx-auto px-4">
        <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
            <div class="text-center">
                <h3 class="stats-number text-4xl font-bold mb-2">10,000+</h3>
                <p class="text-gray-400">Products Available</p>
            </div>
            <div class="text-center">
                <h3 class="stats-number text-4xl font-bold mb-2">5,000+</h3>
                <p class="text-gray-400">Happy Customers</p>
            </div>
            <div class="text-center">
                <h3 class="stats-number text-4xl font-bold mb-2">98%</h3>
                <p class="text-gray-400">Satisfaction Rate</p>
            </div>
            <div class="text-center">
                <h3 class="stats-number text-4xl font-bold mb-2">24/7</h3>
                <p class="text-gray-400">Customer Support</p>
            </div>
        </div>
    </div>
</section>

<!-- Featured Categories -->
<section class="py-16 bg-dark-primary">
    <div class="max-w-7xl mx-auto px-4">
        <h2 class="text-3xl font-bold text-center mb-4 text-white">Browse by Category</h2>
        <p class="text-gray-400 text-center mb-12">Find the perfect parts for your vehicle</p>
        <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
            {% for category in categories %}
            <a href="{% url 'product_list' %}?category={{ category.id }}" class="category-card bg-dark-secondary rounded-lg p-6 text-center">
                <div class="w-16 h-16 mx-auto mb-4 bg-blue-600 rounded-full flex items-center justify-center">
                    <i class="fas {{ category.icon }} text-2xl text-white"></i>
                </div>
                <h3 class="text-xl font-semibold text-white mb-2">{{ category.name }}</h3>
                <p class="text-gray-400">{{ category.description|truncatewords:10 }}</p>
            </a>
            {% endfor %}
        </div>
    </div>
</section>

<!-- Testimonials -->
<section class="py-16 bg-dark-secondary">
    <div class="max-w-7xl mx-auto px-4">
        <h2 class="text-3xl font-bold text-center mb-4 text-white">What Our Customers Say</h2>
        <p class="text-gray-400 text-center mb-12">Don't just take our word for it</p>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
            {% for testimonial in testimonials %}
            <div class="feature-card bg-dark-primary p-6 rounded-lg shadow-lg">
                <div class="flex items-center mb-4">
                    {% if testimonial.image %}
                    <img src="{{ testimonial.image.url }}" alt="{{ testimonial.name }}" class="w-12 h-12 rounded-full mr-4">
                    {% endif %}
                    <div>
                        <h3 class="font-semibold text-white">{{ testimonial.name }}</h3>
                        <p class="text-gray-400">{{ testimonial.position }}</p>
                    </div>
                </div>
                <p class="text-gray-300 mb-4">{{ testimonial.content }}</p>
                <div class="flex text-yellow-400">
                    {% for i in "12345"|make_list %}
                    <svg class="w-5 h-5 {% if forloop.counter <= testimonial.rating %}text-yellow-400{% else %}text-gray-600{% endif %}" 
                         fill="currentColor" viewBox="0 0 20 20">
                        <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path>
                    </svg>
                    {% endfor %}
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</section>

<!-- Call to Action -->
<section class="py-16 bg-dark-primary relative overflow-hidden">
    <div class="absolute inset-0 bg-blue-600 opacity-10"></div>
    <div class="max-w-7xl mx-auto px-4 relative z-10">
        <div class="text-center">
            <h2 class="text-4xl font-bold text-white mb-4">Ready to Get Started?</h2>
            <p class="text-xl text-gray-300 mb-8">Find the perfect parts for your vehicle today</p>
            <div class="flex gap-4 justify-center">
                <a href="{% url 'product_list' %}" class="bg-blue-600 text-white px-8 py-3 rounded-lg hover:bg-blue-700 transition-colors">
                    Browse Products
                </a>
                <a href="{% url 'contact' %}" class="bg-transparent border-2 border-white text-white px-8 py-3 rounded-lg hover:bg-white hover:text-gray-900 transition-colors">
                    Contact Sales
                </a>
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block scripts %}
<script src="https://kit.fontawesome.com/your-font-awesome-kit.js"></script>
<script>
let scene, camera, renderer, controls;
let car, spotLight;

function init() {
    // Scene setup
    scene = new THREE.Scene();
    camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
    
    // Renderer setup
    renderer = new THREE.WebGLRenderer({ 
        canvas: document.getElementById('hero-canvas'),
        antialias: true,
        alpha: true
    });
    renderer.setSize(window.innerWidth, window.innerHeight);
    renderer.shadowMap.enabled = true;
    renderer.shadowMap.type = THREE.PCFSoftShadowMap;

    // Lighting
    const ambientLight = new THREE.AmbientLight(0xffffff, 0.5);
    scene.add(ambientLight);

    spotLight = new THREE.SpotLight(0xffffff, 1);
    spotLight.position.set(0, 10, 10);
    spotLight.angle = Math.PI / 4;
    spotLight.penumbra = 0.1;
    spotLight.decay = 2;
    spotLight.distance = 200;
    spotLight.castShadow = true;
    scene.add(spotLight);

    // Add point lights for dramatic effect
    const pointLight1 = new THREE.PointLight(0x3b82f6, 1, 100); // Blue light
    pointLight1.position.set(5, 5, 5);
    scene.add(pointLight1);

    const pointLight2 = new THREE.PointLight(0xff0000, 1, 100); // Red light
    pointLight2.position.set(-5, 5, -5);
    scene.add(pointLight2);

    // Camera position
    camera.position.set(5, 3, 8);
    camera.lookAt(0, 0, 0);

    // Controls
    controls = new THREE.OrbitControls(camera, renderer.domElement);
    controls.enableDamping = true;
    controls.dampingFactor = 0.05;
    controls.screenSpacePanning = false;
    controls.minDistance = 5;
    controls.maxDistance = 15;
    controls.maxPolarAngle = Math.PI / 2;

    // Load car model
    const loader = new THREE.GLTFLoader();
    loader.load('/static/models/ferrari.glb',
        function (gltf) {
            car = gltf.scene;
            car.scale.set(0.02, 0.02, 0.02);
            car.position.set(0, 0, 0);
            car.castShadow = true;
            car.receiveShadow = true;
            scene.add(car);

            // Add auto-rotation
            function rotateCar() {
                if (car) {
                    car.rotation.y += 0.005;
                }
                requestAnimationFrame(rotateCar);
            }
            rotateCar();
        },
        function (xhr) {
            console.log((xhr.loaded / xhr.total * 100) + '% loaded');
        },
        function (error) {
            console.error('An error happened:', error);
            createFallbackCar();
        }
    );

    // Ground
    const groundGeometry = new THREE.PlaneGeometry(20, 20);
    const groundMaterial = new THREE.MeshStandardMaterial({ 
        color: 0x1a1a1a,
        metalness: 0.5,
        roughness: 0.5
    });
    const ground = new THREE.Mesh(groundGeometry, groundMaterial);
    ground.rotation.x = -Math.PI / 2;
    ground.position.y = -2;
    ground.receiveShadow = true;
    scene.add(ground);

    // Start animation
    animate();
}

function createFallbackCar() {
    const carGeometry = new THREE.Group();

    // Car body
    const bodyGeometry = new THREE.BoxGeometry(4, 1, 2);
    const bodyMaterial = new THREE.MeshPhongMaterial({ color: 0x3b82f6 });
    const body = new THREE.Mesh(bodyGeometry, bodyMaterial);
    body.position.y = 0.5;
    carGeometry.add(body);

    // Car roof
    const roofGeometry = new THREE.BoxGeometry(2, 1, 1.8);
    const roofMaterial = new THREE.MeshPhongMaterial({ color: 0x2563eb });
    const roof = new THREE.Mesh(roofGeometry, roofMaterial);
    roof.position.y = 1.5;
    roof.position.z = 0;
    carGeometry.add(roof);

    // Wheels
    const wheelGeometry = new THREE.CylinderGeometry(0.4, 0.4, 0.2, 32);
    const wheelMaterial = new THREE.MeshPhongMaterial({ color: 0x1f2937 });

    // Front wheels
    const wheelFL = new THREE.Mesh(wheelGeometry, wheelMaterial);
    wheelFL.rotation.z = Math.PI / 2;
    wheelFL.position.set(-1.5, 0.4, 1);
    carGeometry.add(wheelFL);

    const wheelFR = new THREE.Mesh(wheelGeometry, wheelMaterial);
    wheelFR.rotation.z = Math.PI / 2;
    wheelFR.position.set(-1.5, 0.4, -1);
    carGeometry.add(wheelFR);

    // Rear wheels
    const wheelRL = new THREE.Mesh(wheelGeometry, wheelMaterial);
    wheelRL.rotation.z = Math.PI / 2;
    wheelRL.position.set(1.5, 0.4, 1);
    carGeometry.add(wheelRL);

    const wheelRR = new THREE.Mesh(wheelGeometry, wheelMaterial);
    wheelRR.rotation.z = Math.PI / 2;
    wheelRR.position.set(1.5, 0.4, -1);
    carGeometry.add(wheelRR);

    car = carGeometry;
    scene.add(car);
}

function animate() {
    requestAnimationFrame(animate);
    controls.update();
    renderer.render(scene, camera);
}

function onWindowResize() {
    camera.aspect = window.innerWidth / window.innerHeight;
    camera.updateProjectionMatrix();
    renderer.setSize(window.innerWidth, window.innerHeight);
}

window.addEventListener('resize', onWindowResize, false);
document.addEventListener('DOMContentLoaded', init);

// Add scroll animations
document.addEventListener('DOMContentLoaded', function() {
    const cards = document.querySelectorAll('.feature-card');
    
    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.style.opacity = '1';
                entry.target.style.transform = 'translateY(0)';
            }
        });
    }, { threshold: 0.1 });

    cards.forEach(card => {
        card.style.opacity = '0';
        card.style.transform = 'translateY(20px)';
        card.style.transition = 'all 0.6s ease-out';
        observer.observe(card);
    });
});
</script>
{% endblock %}
